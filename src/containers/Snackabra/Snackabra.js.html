<!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">/* Copyright (c) 2021 Magnusson Institute, All Rights Reserved */</font></i>

import React from <font color="#FF0000">'react'</font><font color="#990000">;</font>
import <font color="#FF0000">'./Snackabra.css'</font>
import <font color="#FF0000">{</font> BrowserRouter as Router<font color="#990000">,</font> Route<font color="#990000">,</font> NavLink <font color="#FF0000">}</font> from <font color="#FF0000">"react-router-dom"</font><font color="#990000">;</font>
import Room from <font color="#FF0000">'../Room/Room'</font><font color="#990000">;</font>
import Guide from <font color="#FF0000">'../../components/Guide/Guide'</font><font color="#990000">;</font>
import <font color="#FF0000">{</font> View <font color="#FF0000">}</font> from <font color="#FF0000">'react-native'</font><font color="#990000">;</font>
import user_icon from <font color="#FF0000">'../../static/icons8-user-64.png'</font><font color="#990000">;</font>
import <font color="#FF0000">{</font> JwModal <font color="#FF0000">}</font> from <font color="#FF0000">'../Modal/Modal'</font><font color="#990000">;</font>
import LandingPage from <font color="#FF0000">'../../components/LandingPage/LandingPage'</font><font color="#990000">;</font>

let ROOM_SERVER <font color="#990000">=</font> <font color="#FF0000">"https://"</font> <font color="#990000">+</font> process<font color="#990000">.</font>env<font color="#990000">.</font>REACT_APP_ROOM_SERVER <font color="#990000">+</font> <font color="#FF0000">"/api/room/"</font>
let ROOM_API <font color="#990000">=</font> <font color="#FF0000">"https://"</font> <font color="#990000">+</font> process<font color="#990000">.</font>env<font color="#990000">.</font>REACT_APP_ROOM_SERVER <font color="#990000">+</font> <font color="#FF0000">"/api"</font>

<b><font color="#0000FF">class</font></b> Snackabra <b><font color="#0000FF">extends</font></b> React<font color="#990000">.</font>Component <font color="#FF0000">{</font>

  <b><font color="#000000">constructor</font></b><font color="#990000">()</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">super</font></b><font color="#990000">();</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font>reserved_paths <font color="#990000">=</font> <font color="#990000">[</font><font color="#FF0000">''</font><font color="#990000">,</font> <font color="#FF0000">'guide'</font><font color="#990000">,</font> <font color="#FF0000">'settings'</font><font color="#990000">];</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state <font color="#990000">=</font> <font color="#FF0000">{</font>
      rooms<font color="#990000">:</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">getRooms</font></b><font color="#990000">(),</font>
      activeRoom<font color="#990000">:</font> window<font color="#990000">.</font>location<font color="#990000">.</font>pathname<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'/'</font><font color="#990000">)[</font><font color="#993399">1</font><font color="#990000">],</font>
      activeRooms<font color="#990000">:</font> <font color="#990000">[],</font>
      showAdminTab<font color="#990000">:</font> <b><font color="#0000FF">false</font></b><font color="#990000">,</font>
      contacts<font color="#990000">:</font> localStorage<font color="#990000">.</font><b><font color="#000000">getItem</font></b><font color="#990000">(</font><font color="#FF0000">'contacts'</font><font color="#990000">)</font> <font color="#990000">?</font> JSON<font color="#990000">.</font><b><font color="#000000">parse</font></b><font color="#990000">(</font>localStorage<font color="#990000">.</font><b><font color="#000000">getItem</font></b><font color="#990000">(</font><font color="#FF0000">'contacts'</font><font color="#990000">))</font> <font color="#990000">:</font> <font color="#FF0000">{}</font><font color="#990000">,</font>
    <font color="#FF0000">}</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font>showAdminTab <font color="#990000">=</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>showAdminTab<font color="#990000">.</font><b><font color="#000000">bind</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">);</font>
  <font color="#FF0000">}</font>


  <b><font color="#000000">getRooms</font></b><font color="#990000">()</font> <font color="#FF0000">{</font>
    let _rooms <font color="#990000">=</font> <font color="#FF0000">{}</font>
    <b><font color="#0000FF">try</font></b> <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>localStorage<font color="#990000">.</font><b><font color="#000000">getItem</font></b><font color="#990000">(</font><font color="#FF0000">'rooms'</font><font color="#990000">))</font> <font color="#FF0000">{</font>
        _rooms <font color="#990000">=</font> JSON<font color="#990000">.</font><b><font color="#000000">parse</font></b><font color="#990000">(</font>localStorage<font color="#990000">.</font><b><font color="#000000">getItem</font></b><font color="#990000">(</font><font color="#FF0000">'rooms'</font><font color="#990000">))</font>
        Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>_rooms<font color="#990000">).</font><b><font color="#000000">forEach</font></b><font color="#990000">(</font>room <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b> <font color="#990000">(</font><b><font color="#0000FF">typeof</font></b> _rooms<font color="#990000">[</font>room<font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'string'</font><font color="#990000">)</font> <font color="#FF0000">{</font>
            _rooms<font color="#990000">[</font>room<font color="#990000">]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> name<font color="#990000">:</font> _rooms<font color="#990000">[</font>room<font color="#990000">]</font> <font color="#FF0000">}</font><font color="#990000">;</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font><font color="#990000">)</font>
      <font color="#FF0000">}</font>
      let counter <font color="#990000">=</font> Math<font color="#990000">.</font><b><font color="#000000">max</font></b><font color="#990000">(</font>Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>_rooms<font color="#990000">).</font>length<font color="#990000">,</font> <font color="#993399">1</font><font color="#990000">);</font>
      <b><font color="#0000FF">for</font></b> <font color="#990000">(</font><b><font color="#0000FF">const</font></b> room <b><font color="#0000FF">in</font></b> _rooms<font color="#990000">)</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font>localStorage<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>room<font color="#990000">))</font> <font color="#FF0000">{</font>
          <b><font color="#0000FF">delete</font></b> _rooms<font color="#990000">[</font>room<font color="#990000">];</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
      Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>localStorage<font color="#990000">).</font><b><font color="#000000">forEach</font></b><font color="#990000">((</font>room<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
        <i><font color="#9A1900">//console.log(room.split('_').slice(-1))</font></i>
        <b><font color="#0000FF">if</font></b> <font color="#990000">(!(</font>_rooms<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>room<font color="#990000">)</font> <font color="#990000">||</font> room <font color="#990000">===</font> <font color="#FF0000">'contacts'</font> <font color="#990000">||</font> room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'_'</font><font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(-</font><font color="#993399">1</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'lockedKey'</font> <font color="#990000">||</font> room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'_'</font><font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(-</font><font color="#993399">1</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'owner'</font> <font color="#990000">||</font> room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'_'</font><font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(-</font><font color="#993399">1</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'room'</font> <font color="#990000">||</font> room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'_'</font><font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(-</font><font color="#993399">1</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'username'</font> <font color="#990000">||</font> room <font color="#990000">===</font> <font color="#FF0000">'rooms'</font> <font color="#990000">||</font> room <font color="#990000">===</font> <font color="#FF0000">'lastvisit'</font> <font color="#990000">||</font> room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'_'</font><font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(-</font><font color="#993399">1</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'lastSeenMessage'</font><font color="#990000">))</font> <font color="#FF0000">{</font>
          _rooms<font color="#990000">[</font>room<font color="#990000">]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> name<font color="#990000">:</font> <font color="#FF0000">'Room '</font> <font color="#990000">+</font> counter <font color="#FF0000">}</font><font color="#990000">;</font>
          counter <font color="#990000">+=</font> <font color="#993399">1</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font><font color="#990000">);</font>
      <b><font color="#0000FF">const</font></b> _currentRoom <font color="#990000">=</font> window<font color="#990000">.</font>location<font color="#990000">.</font>pathname<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'/'</font><font color="#990000">)[</font><font color="#993399">1</font><font color="#990000">];</font>
      <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font>_rooms<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>_currentRoom<font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font>_currentRoom<font color="#990000">))</font> <font color="#FF0000">{</font>
        _rooms<font color="#990000">[</font>_currentRoom<font color="#990000">]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> name<font color="#990000">:</font> <font color="#FF0000">'Room '</font> <font color="#990000">+</font> counter <font color="#FF0000">}</font><font color="#990000">;</font>
        counter <font color="#990000">+=</font> <font color="#993399">1</font><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#000000">fetch</font></b><font color="#990000">(</font>ROOM_API <font color="#990000">+</font> <font color="#FF0000">'/getLastMessageTimes'</font><font color="#990000">,</font> <font color="#FF0000">{</font>
        method<font color="#990000">:</font> <font color="#FF0000">'POST'</font><font color="#990000">,</font>
        body<font color="#990000">:</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>_rooms<font color="#990000">))</font>
      <font color="#FF0000">}</font><font color="#990000">).</font><b><font color="#000000">then</font></b><font color="#990000">(</font>res <font color="#990000">=&gt;</font> res<font color="#990000">.</font><b><font color="#000000">json</font></b><font color="#990000">().</font><b><font color="#000000">then</font></b><font color="#990000">(</font>message_times <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
        Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>_rooms<font color="#990000">).</font><b><font color="#000000">forEach</font></b><font color="#990000">(</font>room <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
          _rooms<font color="#990000">[</font>room<font color="#990000">][</font><font color="#FF0000">'lastMessageTime'</font><font color="#990000">]</font> <font color="#990000">=</font> message_times<font color="#990000">[</font>room<font color="#990000">];</font>
          _rooms<font color="#990000">[</font>room<font color="#990000">][</font><font color="#FF0000">'unread'</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">(!</font>localStorage<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>room <font color="#990000">+</font> <font color="#FF0000">'_lastSeenMessage'</font><font color="#990000">)</font> <font color="#990000">||</font> <font color="#990000">(</font>localStorage<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>room <font color="#990000">+</font> <font color="#FF0000">'_lastSeenMessage'</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <b><font color="#000000">parseInt</font></b><font color="#990000">(</font>localStorage<font color="#990000">.</font><b><font color="#000000">getItem</font></b><font color="#990000">(</font>room <font color="#990000">+</font> <font color="#FF0000">'_lastSeenMessage'</font><font color="#990000">),</font> <font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font> <b><font color="#000000">parseInt</font></b><font color="#990000">(</font>message_times<font color="#990000">[</font>room<font color="#990000">],</font> <font color="#993399">2</font><font color="#990000">)))</font> <font color="#990000">&amp;&amp;</font> message_times<font color="#990000">[</font>room<font color="#990000">]!==</font><font color="#FF0000">'0'</font><font color="#990000">;</font>
        <font color="#FF0000">}</font><font color="#990000">)</font>
        <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> rooms<font color="#990000">:</font> _rooms <font color="#FF0000">}</font><font color="#990000">)</font>
        localStorage<font color="#990000">.</font><b><font color="#000000">setItem</font></b><font color="#990000">(</font><font color="#FF0000">'rooms'</font><font color="#990000">,</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>_rooms<font color="#990000">))</font>
      <font color="#FF0000">}</font><font color="#990000">))</font>
      localStorage<font color="#990000">.</font><b><font color="#000000">setItem</font></b><font color="#990000">(</font><font color="#FF0000">'rooms'</font><font color="#990000">,</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>_rooms<font color="#990000">))</font>
      <b><font color="#0000FF">return</font></b> _rooms<font color="#990000">;</font>
    <font color="#FF0000">}</font> <b><font color="#0000FF">catch</font></b> <font color="#990000">(</font>e<font color="#990000">)</font> <font color="#FF0000">{</font>
      console<font color="#990000">.</font><b><font color="#000000">log</font></b><font color="#990000">(</font>e<font color="#990000">);</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">goToRoom</font></b><font color="#990000">(</font>roomId<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font>roomId<font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">!</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRooms<font color="#990000">.</font><b><font color="#000000">includes</font></b><font color="#990000">(</font>roomId<font color="#990000">))</font> <font color="#FF0000">{</font>
      <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> activeRooms<font color="#990000">:</font> <font color="#990000">[...</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRooms<font color="#990000">,</font> roomId<font color="#990000">]</font> <font color="#FF0000">}</font><font color="#990000">);</font>
    <font color="#FF0000">}</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> activeRoom<font color="#990000">:</font> roomId<font color="#990000">,</font> showAdminTab<font color="#990000">:</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> document<font color="#990000">.</font>cookie<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'; '</font><font color="#990000">).</font><b><font color="#000000">find</font></b><font color="#990000">(</font>row <font color="#990000">=&gt;</font> row<font color="#990000">.</font><b><font color="#000000">startsWith</font></b><font color="#990000">(</font><font color="#FF0000">'token_'</font> <font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">))</font> <font color="#990000">!==</font> undefined<font color="#FF0000">}</font><font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">isValidPath</font></b><font color="#990000">(</font>path<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font>path<font color="#990000">)</font> <font color="#990000">||</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>reserved_paths<font color="#990000">.</font><b><font color="#000000">includes</font></b><font color="#990000">(</font>path<font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font>roomId<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">!</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>reserved_paths<font color="#990000">.</font><b><font color="#000000">includes</font></b><font color="#990000">(</font>roomId<font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> roomId<font color="#990000">.</font>length <font color="#990000">===</font> <font color="#993399">64</font><font color="#990000">;</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">showAdminTab</font></b><font color="#990000">()</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font>showAdminTab<font color="#990000">:</font> <b><font color="#0000FF">true</font></b><font color="#FF0000">}</font><font color="#990000">);</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">updateContacts</font></b><font color="#990000">(</font>contacts<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> contacts<font color="#990000">:</font> <font color="#FF0000">{</font> <font color="#990000">...</font>contacts <font color="#FF0000">}</font> <font color="#FF0000">}</font><font color="#990000">)</font>
    localStorage<font color="#990000">.</font><b><font color="#000000">setItem</font></b><font color="#990000">(</font><font color="#FF0000">'contacts'</font><font color="#990000">,</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>contacts<font color="#990000">));</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">updateRoomNames</font></b><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> rooms<font color="#990000">:</font> rooms <font color="#FF0000">}</font><font color="#990000">);</font>
    localStorage<font color="#990000">.</font><b><font color="#000000">setItem</font></b><font color="#990000">(</font><font color="#FF0000">'rooms'</font><font color="#990000">,</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>rooms<font color="#990000">))</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">sortRooms</font></b><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">return</font></b> Object<font color="#990000">.</font><b><font color="#000000">entries</font></b><font color="#990000">(</font>rooms<font color="#990000">).</font><b><font color="#000000">sort</font></b><font color="#990000">((</font>a<font color="#990000">,</font> b<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b> <font color="#990000">(</font><b><font color="#000000">parseInt</font></b><font color="#990000">(</font>a<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'lastMessageTime'</font><font color="#990000">],</font> <font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <b><font color="#000000">parseInt</font></b><font color="#990000">(</font>b<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'lastMessageTime'</font><font color="#990000">],</font> <font color="#993399">2</font><font color="#990000">))</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font><b><font color="#000000">parseInt</font></b><font color="#990000">(</font>a<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'lastMessageTime'</font><font color="#990000">],</font> <font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font> <b><font color="#000000">parseInt</font></b><font color="#990000">(</font>b<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'lastMessageTime'</font><font color="#990000">],</font> <font color="#993399">2</font><font color="#990000">))</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">return</font></b> <font color="#993399">1</font><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">return</font></b> a<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'name'</font><font color="#990000">].</font><b><font color="#000000">toLowerCase</font></b><font color="#990000">().</font><b><font color="#000000">localeCompare</font></b><font color="#990000">(</font>b<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'name'</font><font color="#990000">].</font><b><font color="#000000">toLowerCase</font></b><font color="#990000">(),</font> undefined<font color="#990000">,</font> <font color="#FF0000">{</font> numeric<font color="#990000">:</font> <b><font color="#0000FF">true</font></b> <font color="#FF0000">}</font><font color="#990000">);</font>
    <font color="#FF0000">}</font><font color="#990000">)</font>
  <font color="#FF0000">}</font>


  async <b><font color="#000000">componentDidMount</font></b><font color="#990000">()</font> <font color="#FF0000">{</font>
    window<font color="#990000">.</font>onmessage <font color="#990000">=</font> <b><font color="#000000">async</font></b> <font color="#990000">(</font>e<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>e<font color="#990000">.</font>origin <font color="#990000">!==</font> <font color="#FF0000">'https://privacy.app'</font><font color="#990000">)</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
      <font color="#FF0000">}</font>
      <b><font color="#0000FF">try</font></b> <font color="#FF0000">{</font>
        let payload <font color="#990000">=</font> JSON<font color="#990000">.</font><b><font color="#000000">parse</font></b><font color="#990000">(</font>e<font color="#990000">.</font>data<font color="#990000">);</font>
        <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>payload<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font><font color="#FF0000">'localStorage'</font><font color="#990000">))</font> <font color="#FF0000">{</font>
          e<font color="#990000">.</font>source<font color="#990000">.</font><b><font color="#000000">postMessage</font></b><font color="#990000">(</font>JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>localStorage<font color="#990000">));</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">for</font></b> <font color="#990000">(</font>let room <b><font color="#0000FF">in</font></b> payload<font color="#990000">)</font> <font color="#FF0000">{</font>
          <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'.'</font><font color="#990000">)[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'name'</font><font color="#990000">)</font> <font color="#FF0000">{</font>
            let rooms <font color="#990000">=</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">getRooms</font></b><font color="#990000">();</font>
            rooms<font color="#990000">[</font>room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'.'</font><font color="#990000">)[</font><font color="#993399">0</font><font color="#990000">]]</font> <font color="#990000">=</font> <font color="#FF0000">{</font> name<font color="#990000">:</font> payload<font color="#990000">[</font>room<font color="#990000">]</font> <font color="#FF0000">}</font><font color="#990000">;</font>
            <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">updateRoomNames</font></b><font color="#990000">(</font>rooms<font color="#990000">);</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>room<font color="#990000">.</font><b><font color="#000000">split</font></b><font color="#990000">(</font><font color="#FF0000">'.'</font><font color="#990000">)[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">===</font> <font color="#FF0000">'keyRotation'</font><font color="#990000">)</font> <font color="#FF0000">{</font>
            <b><font color="#000000">fetch</font></b><font color="#990000">(</font>ROOM_SERVER <font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom <font color="#990000">+</font> <font color="#FF0000">"/ownerKeyRotation"</font><font color="#990000">,</font> <font color="#FF0000">{</font> credentials<font color="#990000">:</font> <font color="#FF0000">'include'</font> <font color="#FF0000">}</font><font color="#990000">);</font>
          <font color="#FF0000">}</font>
          <b><font color="#0000FF">else</font></b> <font color="#FF0000">{</font>
            localStorage<font color="#990000">.</font><b><font color="#000000">setItem</font></b><font color="#990000">(</font>room<font color="#990000">,</font> JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font>payload<font color="#990000">[</font>room<font color="#990000">]));</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font> <b><font color="#0000FF">catch</font></b> <font color="#990000">(</font>e<font color="#990000">)</font> <font color="#FF0000">{</font>
        console<font color="#990000">.</font><b><font color="#000000">log</font></b><font color="#990000">(</font>e<font color="#990000">);</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
    window<font color="#990000">.</font>onclick <font color="#990000">=</font> <b><font color="#0000FF">function</font></b> <font color="#990000">(</font>event<font color="#990000">)</font> <font color="#FF0000">{</font>
      <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font>event<font color="#990000">.</font>target<font color="#990000">.</font><b><font color="#000000">matches</font></b><font color="#990000">(</font><font color="#FF0000">'#roomListNavlink'</font><font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#990000">!</font>event<font color="#990000">.</font>target<font color="#990000">.</font><b><font color="#000000">matches</font></b><font color="#990000">(</font><font color="#FF0000">'#menuDropdownIcon'</font><font color="#990000">))</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">var</font></b> dropdowns <font color="#990000">=</font> document<font color="#990000">.</font><b><font color="#000000">getElementsByClassName</font></b><font color="#990000">(</font><font color="#FF0000">"dropdown-content"</font><font color="#990000">);</font>
        <b><font color="#0000FF">var</font></b> i<font color="#990000">;</font>
        <b><font color="#0000FF">for</font></b> <font color="#990000">(</font>i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> dropdowns<font color="#990000">.</font>length<font color="#990000">;</font> i<font color="#990000">++)</font> <font color="#FF0000">{</font>
          <b><font color="#0000FF">var</font></b> openDropdown <font color="#990000">=</font> dropdowns<font color="#990000">[</font>i<font color="#990000">];</font>
          <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>openDropdown<font color="#990000">.</font>classList<font color="#990000">.</font><b><font color="#000000">contains</font></b><font color="#990000">(</font><font color="#FF0000">'show'</font><font color="#990000">))</font> <font color="#FF0000">{</font>
            openDropdown<font color="#990000">.</font>classList<font color="#990000">.</font><b><font color="#000000">remove</font></b><font color="#990000">(</font><font color="#FF0000">'show'</font><font color="#990000">);</font>
          <font color="#FF0000">}</font>
        <font color="#FF0000">}</font>
      <font color="#FF0000">}</font>
    <font color="#FF0000">}</font>
    <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">getRooms</font></b><font color="#990000">();</font>
    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">))</font> <font color="#FF0000">{</font>
      <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">setState</font></b><font color="#990000">(</font><font color="#FF0000">{</font> activeRooms<font color="#990000">:</font> <font color="#990000">[...</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRooms<font color="#990000">,</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">]</font> <font color="#FF0000">}</font><font color="#990000">);</font>
    <font color="#FF0000">}</font>
  <font color="#FF0000">}</font>

  <b><font color="#000000">render</font></b><font color="#990000">()</font> <font color="#FF0000">{</font>
    <b><font color="#0000FF">const</font></b> _validRoomId <font color="#990000">=</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidRoomId</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">);</font>
    <b><font color="#0000FF">return</font></b> <font color="#990000">(</font>
      <font color="#990000">&lt;</font>Router<font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>div id<font color="#990000">=</font><font color="#FF0000">'image_overlay'</font><font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>div id<font color="#990000">=</font><font color="#FF0000">"preview_img"</font> className<font color="#990000">=</font><font color="#FF0000">"center"</font><font color="#990000">&gt;&lt;</font>h2<font color="#990000">&gt;</font>Fetching image<font color="#990000">....&lt;</font><font color="#FF6600">/h2&gt;&lt;/</font>div<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">"close-btn"</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
            document<font color="#990000">.</font><b><font color="#000000">getElementById</font></b><font color="#990000">(</font><font color="#FF0000">'image_overlay'</font><font color="#990000">).</font>style<font color="#990000">.</font>display <font color="#990000">=</font> <font color="#FF0000">'none'</font><font color="#990000">;</font>
            document<font color="#990000">.</font><b><font color="#000000">getElementById</font></b><font color="#990000">(</font><font color="#FF0000">'preview_img'</font><font color="#990000">).</font>classList<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font><font color="#FF0000">'center'</font><font color="#990000">);</font>
            document<font color="#990000">.</font><b><font color="#000000">getElementById</font></b><font color="#990000">(</font><font color="#FF0000">'preview_img'</font><font color="#990000">).</font>innerHTML <font color="#990000">=</font> <font color="#FF0000">'&lt;h2&gt;Fetching image...&lt;/h2&gt;'</font><font color="#990000">;</font>
          <font color="#FF0000">}}</font><font color="#990000">&gt;&amp;</font>#<font color="#993399">10006</font><font color="#990000">;&lt;/</font>button<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font>
        <font color="#FF0000">{</font><font color="#990000">!</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">isValidPath</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">)</font> <font color="#990000">?</font> <font color="#990000">&lt;</font>Route<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>h2 style<font color="#990000">=</font><font color="#FF0000">{{</font> textAlign<font color="#990000">:</font> <font color="#FF0000">'center'</font> <font color="#FF0000">}}</font><font color="#990000">&gt;</font>You tried to open room <font color="#FF0000">{</font>window<font color="#990000">.</font>location<font color="#990000">.</font>pathname<font color="#990000">.</font><b><font color="#000000">slice</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">)</font><font color="#FF0000">}</font> which is not a proper room name<font color="#990000">.</font> Room names are always a <font color="#993399">64</font> character b<font color="#990000">-</font><font color="#993399">64</font> string<font color="#990000">.&lt;/</font>h2<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>Route<font color="#990000">&gt;</font> <font color="#990000">:</font>
          <font color="#990000">&lt;</font>View style<font color="#990000">=</font><font color="#FF0000">{{</font> width<font color="#990000">:</font> <font color="#FF0000">"100%"</font><font color="#990000">,</font> height<font color="#990000">:</font> <font color="#FF0000">"100%"</font><font color="#990000">,</font> flex<font color="#990000">:</font> <font color="#993399">1</font><font color="#990000">,</font> maxWidth<font color="#990000">:</font> <font color="#FF0000">"1000px"</font><font color="#990000">,</font> margin<font color="#990000">:</font> <font color="#FF0000">"auto"</font><font color="#990000">,</font> borderTopWidth<font color="#990000">:</font> <font color="#FF0000">"0"</font><font color="#990000">,</font> borderStyle<font color="#990000">:</font> <font color="#FF0000">"solid"</font><font color="#990000">,</font> borderWidth<font color="#990000">:</font> <font color="#FF0000">"1px"</font><font color="#990000">,</font> borderColor<font color="#990000">:</font> <font color="#FF0000">"rgb(178, 178, 178)"</font><font color="#990000">,</font> overflow<font color="#990000">:</font> <font color="#FF0000">"auto"</font> <font color="#FF0000">}}</font><font color="#990000">&gt;</font>
            <font color="#990000">&lt;</font>ul className<font color="#990000">=</font><font color="#FF0000">"header"</font><font color="#990000">&gt;</font>
              <font color="#990000">&lt;</font>li className<font color="#990000">=</font><font color="#FF0000">"header-link"</font><font color="#990000">&gt;&lt;</font>NavLink exact activeClassName<font color="#990000">=</font><font color="#FF0000">"activeNavlink"</font> className<font color="#990000">=</font><font color="#FF0000">"navlink"</font> to<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"/"</font><font color="#FF0000">}</font><font color="#990000">&gt;</font>Home<font color="#990000">&lt;</font><font color="#FF6600">/NavLink&gt;&lt;/</font>li<font color="#990000">&gt;</font>
              <font color="#FF0000">{</font>_validRoomId <font color="#990000">&amp;&amp;</font> <font color="#990000">&lt;</font>li className<font color="#990000">=</font><font color="#FF0000">"header-link"</font><font color="#990000">&gt;</font>
                <font color="#990000">&lt;</font>NavLink onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font> window<font color="#990000">.</font>location<font color="#990000">.</font>pathname <font color="#990000">===</font> <font color="#FF0000">'/'</font> <font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom <font color="#990000">&amp;&amp;</font> document<font color="#990000">.</font><b><font color="#000000">getElementById</font></b><font color="#990000">(</font><font color="#FF0000">"roomDropdown"</font><font color="#990000">).</font>classList<font color="#990000">.</font><b><font color="#000000">toggle</font></b><font color="#990000">(</font><font color="#FF0000">"show"</font><font color="#990000">)</font> <font color="#FF0000">}}</font> exact activeClassName<font color="#990000">=</font><font color="#FF0000">"activeNavlink"</font> className<font color="#990000">=</font><font color="#FF0000">"navlink"</font> id<font color="#990000">=</font><font color="#FF0000">'roomListNavlink'</font> to<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"/"</font> <font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#FF0000">}</font><font color="#990000">&gt;</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#990000">[</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">][</font><font color="#FF0000">'name'</font><font color="#990000">]</font><font color="#FF0000">}</font><font color="#990000">&lt;/</font>NavLink<font color="#990000">&gt;</font>
                <font color="#990000">&lt;</font>div id<font color="#990000">=</font><font color="#FF0000">"roomDropdown"</font> className<font color="#990000">=</font><font color="#FF0000">"dropdown-content"</font><font color="#990000">&gt;</font>
                  <font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">sortRooms</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#990000">).</font><b><font color="#000000">slice</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font> <font color="#993399">8</font><font color="#990000">).</font><b><font color="#000000">map</font></b><font color="#990000">(</font>room <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
                    <b><font color="#0000FF">return</font></b> <font color="#990000">&lt;</font>NavLink onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">goToRoom</font></b><font color="#990000">(</font>room<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">])</font><font color="#FF0000">}</font> key<font color="#990000">=</font><font color="#FF0000">{</font>room<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font><font color="#FF0000">}</font> to<font color="#990000">=</font><font color="#FF0000">{</font>room<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font><font color="#FF0000">}</font><font color="#990000">&gt;</font><font color="#FF0000">{</font>room<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'unread'</font><font color="#990000">]</font> <font color="#990000">?</font> <font color="#990000">&lt;</font>b<font color="#990000">&gt;</font><font color="#FF0000">{</font>room<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">][</font><font color="#FF0000">'name'</font><font color="#990000">]</font><font color="#FF0000">}</font><font color="#990000">&lt;</font><font color="#FF6600">/b&gt; : room[1]['name']}&lt;/</font>NavLink<font color="#990000">&gt;</font>
                  <font color="#FF0000">}</font><font color="#990000">)</font><font color="#FF0000">}</font>
                  <font color="#990000">&lt;</font>NavLink to<font color="#990000">=</font><font color="#FF0000">'/#roomList'</font><font color="#990000">&gt;</font>All Rooms<font color="#990000">&lt;/</font>NavLink<font color="#990000">&gt;</font>
                <font color="#990000">&lt;</font><font color="#FF6600">/div&gt;&lt;/</font>li<font color="#990000">&gt;</font><font color="#FF0000">}</font>
              <font color="#990000">&lt;</font>li className<font color="#990000">=</font><font color="#FF0000">"header-link"</font><font color="#990000">&gt;&lt;</font>NavLink exact activeClassName<font color="#990000">=</font><font color="#FF0000">"activeNavlink"</font> className<font color="#990000">=</font><font color="#FF0000">"navlink"</font> to<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"/guide"</font><font color="#FF0000">}</font><font color="#990000">&gt;</font>Guide<font color="#990000">&lt;</font><font color="#FF6600">/NavLink&gt;&lt;/</font>li<font color="#990000">&gt;</font>
              <font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>showAdminTab <font color="#990000">&amp;&amp;</font> <font color="#990000">&lt;</font>li className<font color="#990000">=</font><font color="#FF0000">"header-link"</font><font color="#990000">&gt;&lt;</font>NavLink exact className<font color="#990000">=</font><font color="#FF0000">"navlink"</font> activeClassName<font color="#990000">=</font><font color="#FF0000">"activeNavlink"</font> to<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"/"</font> <font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom <font color="#990000">+</font> <font color="#FF0000">"/admin"</font><font color="#FF0000">}</font><font color="#990000">&gt;</font>Admin<font color="#990000">&lt;</font><font color="#FF6600">/NavLink&gt;&lt;/</font>li<font color="#990000">&gt;</font><font color="#FF0000">}</font>
              <font color="#FF0000">{</font><font color="#990000">!</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>showAdminTab <font color="#990000">&amp;&amp;</font> _validRoomId <font color="#990000">&amp;&amp;</font> <font color="#990000">&lt;</font>li className<font color="#990000">=</font><font color="#FF0000">"header-link"</font> id<font color="#990000">=</font><font color="#FF0000">"user-icon"</font><font color="#990000">&gt;&lt;</font>img src<font color="#990000">=</font><font color="#FF0000">{</font>user_icon<font color="#FF0000">}</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>event<font color="#990000">)</font> <font color="#990000">=&gt;</font> JwModal<font color="#990000">.</font><b><font color="#000000">open</font></b><font color="#990000">(</font><font color="#FF0000">'user-info-'</font><font color="#990000">+</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#990000">)</font><font color="#FF0000">}</font> alt<font color="#990000">=</font><font color="#FF0000">'User Icon'</font><font color="#990000">&gt;&lt;</font><font color="#FF6600">/img&gt;&lt;/</font>li<font color="#990000">&gt;</font><font color="#FF0000">}</font>
            <font color="#990000">&lt;/</font>ul<font color="#990000">&gt;</font>
            <font color="#990000">&lt;</font>Route exact path<font color="#990000">=</font><font color="#FF0000">"/"</font> children<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font><font color="#FF0000">{</font> match<font color="#990000">,</font> location <font color="#FF0000">}</font><font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#990000">(</font>
              <font color="#990000">&lt;</font>LandingPage
                key<font color="#990000">=</font><font color="#FF0000">{</font>JSON<font color="#990000">.</font><b><font color="#000000">stringify</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#990000">)</font><font color="#FF0000">}</font>
                className<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">!</font>match <font color="#990000">?</font> <font color="#FF0000">'hidden'</font> <font color="#990000">:</font> <b><font color="#0000FF">null</font></b><font color="#FF0000">}</font>
                rooms<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#FF0000">}</font>
                currentRoom<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRoom<font color="#FF0000">}</font>
                refreshRooms<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">getRooms</font></b><font color="#990000">()</font><font color="#FF0000">}</font>
                updateRoomNames<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">updateRoomNames</font></b><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#FF0000">}}</font>
                goToRoom<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>roomId<font color="#990000">)</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">goToRoom</font></b><font color="#990000">(</font>roomId<font color="#990000">)</font><font color="#FF0000">}</font>
                sortRooms<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">sortRooms</font></b><font color="#990000">(</font>rooms<font color="#990000">)</font><font color="#FF0000">}</font> <font color="#990000">/&gt;</font>
            <font color="#990000">)</font><font color="#FF0000">}</font>
            <font color="#990000">/&gt;</font>
            <font color="#990000">&lt;</font>Route exact path<font color="#990000">=</font><font color="#FF0000">"/guide"</font> children<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font><font color="#FF0000">{</font> match <font color="#FF0000">}</font><font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#990000">(</font>
              <font color="#990000">&lt;</font>Guide
                className<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">!</font>match <font color="#990000">?</font> <font color="#FF0000">'hidden'</font> <font color="#990000">:</font> <b><font color="#0000FF">null</font></b><font color="#FF0000">}</font> <font color="#990000">/&gt;</font>
            <font color="#990000">)</font><font color="#FF0000">}</font>
            <font color="#990000">/&gt;</font>
            <font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>activeRooms<font color="#990000">.</font><b><font color="#000000">map</font></b><font color="#990000">((</font>roomId<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
              <b><font color="#0000FF">return</font></b> <font color="#990000">&lt;</font>Route key<font color="#990000">=</font><font color="#FF0000">{</font>roomId<font color="#FF0000">}</font> exact path<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">'/'</font> <font color="#990000">+</font> roomId<font color="#FF0000">}</font> children<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font><font color="#FF0000">{</font> match <font color="#FF0000">}</font><font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#990000">(</font>
                <font color="#990000">&lt;</font>Room
                  rooms<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#FF0000">}</font>
                  roomId<font color="#990000">=</font><font color="#FF0000">{</font>roomId<font color="#FF0000">}</font>
                  roomName<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>rooms<font color="#990000">[</font>roomId<font color="#990000">][</font><font color="#FF0000">'name'</font><font color="#990000">]</font><font color="#FF0000">}</font>
                  className<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">!</font>match <font color="#990000">?</font> <font color="#FF0000">'hidden'</font> <font color="#990000">:</font> <b><font color="#0000FF">null</font></b><font color="#FF0000">}</font>
                  contacts<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>state<font color="#990000">.</font>contacts<font color="#FF0000">}</font>
                  updateContacts<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>contacts<font color="#990000">)</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">updateContacts</font></b><font color="#990000">(</font>contacts<font color="#990000">)</font><font color="#FF0000">}</font>
                  updateRoomNames<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>rooms<font color="#990000">)</font> <font color="#990000">=&gt;</font> <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">updateRoomNames</font></b><font color="#990000">(</font>rooms<font color="#990000">)</font><font color="#FF0000">}</font>
                  showAdminTab<font color="#990000">=</font><font color="#FF0000">{</font><b><font color="#0000FF">this</font></b><font color="#990000">.</font>showAdminTab<font color="#FF0000">}</font>
                <font color="#990000">/&gt;</font>
              <font color="#990000">)</font><font color="#FF0000">}</font>
              <font color="#990000">/&gt;</font>
            <font color="#FF0000">}</font><font color="#990000">)</font><font color="#FF0000">}</font>
          <font color="#990000">&lt;/</font>View<font color="#990000">&gt;</font>
        <font color="#FF0000">}</font>
      <font color="#990000">&lt;/</font>Router <font color="#990000">&gt;</font>

    <font color="#990000">)</font>
  <font color="#FF0000">}</font>
<font color="#FF0000">}</font>

<b><font color="#0000FF">export</font></b> <b><font color="#0000FF">default</font></b> Snackabra
</tt></pre>
