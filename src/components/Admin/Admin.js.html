<!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><i><font color="#9A1900">/* Copyright (c) 2021 Magnusson Institute, All Rights Reserved */</font></i>

import React<font color="#990000">,</font> <font color="#FF0000">{</font> useState <font color="#FF0000">}</font> from <font color="#FF0000">'react'</font><font color="#990000">;</font>
import <font color="#FF0000">{</font> JwModal <font color="#FF0000">}</font> from <font color="#FF0000">'../../containers/Modal/Modal'</font>
import <font color="#FF0000">{</font> Trans <font color="#FF0000">}</font> from <font color="#FF0000">'@lingui/macro'</font>
import <font color="#FF0000">'./Admin.css'</font>

<b><font color="#0000FF">const</font></b> Admin <font color="#990000">=</font> <font color="#990000">(</font>props<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
  <b><font color="#0000FF">const</font></b> <font color="#990000">[</font>roomCapacity<font color="#990000">,</font> setRoomCapacity<font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">useState</font></b><font color="#990000">(</font>props<font color="#990000">.</font>roomCapacity<font color="#990000">);</font>
  <b><font color="#0000FF">const</font></b> <font color="#990000">[</font>motd<font color="#990000">,</font> setMOTD<font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">useState</font></b><font color="#990000">(</font>props<font color="#990000">.</font>motd<font color="#990000">);</font>
  <i><font color="#9A1900">/*</font></i>
<i><font color="#9A1900">  if(props.roomCapacity!==roomCapacity) {</font></i>
<i><font color="#9A1900">    setRoomCapacity(props.roomCapacity);</font></i>
<i><font color="#9A1900">  }</font></i>
<i><font color="#9A1900">  */</font></i>
  React<font color="#990000">.</font><b><font color="#000000">useEffect</font></b><font color="#990000">(()</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
    <b><font color="#000000">setRoomCapacity</font></b><font color="#990000">(</font>props<font color="#990000">.</font>roomCapacity<font color="#990000">);</font>
  <font color="#FF0000">}</font><font color="#990000">,</font> <font color="#990000">[</font>props<font color="#990000">.</font>roomCapacity<font color="#990000">]);</font>

  React<font color="#990000">.</font><b><font color="#000000">useEffect</font></b><font color="#990000">(()</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
    <b><font color="#000000">setMOTD</font></b><font color="#990000">(</font>props<font color="#990000">.</font>motd<font color="#990000">);</font>
  <font color="#FF0000">}</font><font color="#990000">,</font> <font color="#990000">[</font>props<font color="#990000">.</font>motd<font color="#990000">])</font>
  <b><font color="#0000FF">return</font></b> props<font color="#990000">.</font>adminError <font color="#990000">?</font> <font color="#990000">(</font>
    <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"admin "</font> <font color="#990000">+</font> props<font color="#990000">.</font>className<font color="#FF0000">}</font><font color="#990000">&gt;</font>
      <font color="#990000">&lt;</font>h2<font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'admin error header'</font><font color="#990000">&gt;</font>Please join again from your membership page to access the admin features<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>h2<font color="#990000">&gt;</font>
    <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font>
  <font color="#990000">)</font> <font color="#990000">:</font>
    <font color="#990000">(</font>
      <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">{</font><font color="#FF0000">"admin "</font> <font color="#990000">+</font> props<font color="#990000">.</font>className<font color="#FF0000">}</font><font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>JwModal id<font color="#990000">=</font><font color="#FF0000">"admin-response"</font><font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button gray-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font>JwModal<font color="#990000">.</font><b><font color="#000000">close</font></b><font color="#990000">(</font><font color="#FF0000">'admin-response'</font><font color="#990000">)</font><font color="#FF0000">}</font><font color="#990000">&gt;</font>Close<font color="#990000">&lt;/</font>button<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>JwModal<font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>JwModal id<font color="#990000">=</font><font color="#FF0000">"confirm-lockdown"</font><font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'confirm restriction message'</font><font color="#990000">&gt;</font>Restriction will cause <b><font color="#0000FF">new</font></b> encryption keys to be generated<font color="#990000">,</font> and will only be shared to participants that you as Owner explicitly approve<font color="#990000">.</font> New participants can still whisper to you<font color="#990000">,</font> but not send or receive messages from anybody <b><font color="#0000FF">else</font></b><font color="#990000">.&lt;/</font>Trans<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>br <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button green-btn'</font> id<font color="#990000">=</font><font color="#FF0000">'confirm-lockdown-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>e<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
            props<font color="#990000">.</font><b><font color="#000000">lockRoom</font></b><font color="#990000">();</font>
            JwModal<font color="#990000">.</font><b><font color="#000000">close</font></b><font color="#990000">(</font><font color="#FF0000">'confirm-lockdown'</font><font color="#990000">)(</font>e<font color="#990000">);</font>
          <font color="#FF0000">}}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'confirm room restriction button text'</font><font color="#990000">&gt;</font>Confirm Room Restriction<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>button<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>JwModal<font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>h2 id<font color="#990000">=</font><font color="#FF0000">'admin-title'</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'admin header'</font><font color="#990000">&gt;</font>Admin Controls <font color="#990000">-</font> <font color="#FF0000">{</font>props<font color="#990000">.</font>roomName<font color="#FF0000">}</font><font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>h2 <font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">"adminSection"</font><font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>label htmlFor<font color="#990000">=</font><font color="#FF0000">'motd'</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'motd label'</font><font color="#990000">&gt;</font>Enter the Message of the Day below<font color="#990000">:</font> <font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>label<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>br <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>textarea rows<font color="#990000">=</font><font color="#FF0000">{</font><font color="#993399">5</font><font color="#FF0000">}</font> cols<font color="#990000">=</font><font color="#FF0000">{</font><font color="#993399">50</font><font color="#FF0000">}</font> id<font color="#990000">=</font><font color="#FF0000">'motd'</font> onFocus<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>event<font color="#990000">)</font> <font color="#990000">=&gt;</font> event<font color="#990000">.</font>target<font color="#990000">.</font><b><font color="#000000">select</font></b><font color="#990000">()</font><font color="#FF0000">}</font> placeholder<font color="#990000">=</font><font color="#FF0000">'Enter the Message of the Day here...'</font> value<font color="#990000">=</font><font color="#FF0000">{</font>motd<font color="#FF0000">}</font> onChange<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>event<font color="#990000">)=&gt;</font><b><font color="#000000">setMOTD</font></b><font color="#990000">(</font>event<font color="#990000">.</font>target<font color="#990000">.</font>value<font color="#990000">)</font><font color="#FF0000">}</font><font color="#990000">&gt;&lt;/</font>textarea<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>br <font color="#990000">/&gt;&lt;</font>br <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button green-btn'</font> id<font color="#990000">=</font><font color="#FF0000">'motd-save-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font> props<font color="#990000">.</font><b><font color="#000000">setMOTD</font></b><font color="#990000">()</font> <font color="#FF0000">}}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'save button text'</font><font color="#990000">&gt;</font>Save<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>button<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">"adminSection"</font><font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>label htmlFor<font color="#990000">=</font><font color="#FF0000">"roomCapacity-input"</font> style<font color="#990000">=</font><font color="#FF0000">{{</font> fontSize<font color="#990000">:</font> <font color="#FF0000">"20px"</font> <font color="#FF0000">}}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'change room capacity label'</font><font color="#990000">&gt;</font>Change Room Capacity<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>label<font color="#990000">&gt;</font>
          <font color="#990000">&lt;</font>br <font color="#990000">/&gt;&lt;</font>br <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>input type<font color="#990000">=</font><font color="#FF0000">"text"</font> id<font color="#990000">=</font><font color="#FF0000">'roomCapacity-input'</font> placeholder<font color="#990000">=</font><font color="#FF0000">"Enter Room Capacity"</font> value<font color="#990000">=</font><font color="#FF0000">{</font>roomCapacity<font color="#FF0000">}</font> onChange<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>event<font color="#990000">)</font> <font color="#990000">=&gt;</font> <b><font color="#000000">setRoomCapacity</font></b><font color="#990000">(</font>event<font color="#990000">.</font>target<font color="#990000">.</font>value<font color="#990000">)</font><font color="#FF0000">}</font> onFocus<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">(</font>event<font color="#990000">)</font> <font color="#990000">=&gt;</font> event<font color="#990000">.</font>target<font color="#990000">.</font><b><font color="#000000">select</font></b><font color="#990000">()</font><font color="#FF0000">}</font> autoFocus <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>br <font color="#990000">/&gt;</font>
          <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button gray-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> props<font color="#990000">.</font><b><font color="#000000">updateRoomCapacity</font></b><font color="#990000">(</font>roomCapacity<font color="#990000">)</font><font color="#FF0000">}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'update button text'</font><font color="#990000">&gt;</font>Update<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>button<font color="#990000">&gt;</font>
        <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font>
        <font color="#990000">&lt;</font>br <font color="#990000">/&gt;</font> <font color="#990000">&lt;</font>br <font color="#990000">/&gt;</font>
        <font color="#FF0000">{</font>
          props<font color="#990000">.</font>locked <font color="#990000">?</font>
            <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">"adminSection"</font><font color="#990000">&gt;</font>
              <font color="#990000">&lt;</font>p style<font color="#990000">=</font><font color="#FF0000">{{</font> fontSize<font color="#990000">:</font> <font color="#FF0000">"20px"</font><font color="#990000">,</font> textDecoration<font color="#990000">:</font> <font color="#FF0000">"none"</font> <font color="#FF0000">}}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'join requests header'</font><font color="#990000">&gt;</font>Join Requests<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>p<font color="#990000">&gt;</font>
              <font color="#990000">&lt;</font>table id<font color="#990000">=</font><font color="#FF0000">"joinRequests"</font><font color="#990000">&gt;</font>
                <font color="#990000">&lt;</font>tbody style<font color="#990000">=</font><font color="#FF0000">{{</font> width<font color="#990000">:</font> <font color="#FF0000">"100%"</font> <font color="#FF0000">}}</font><font color="#990000">&gt;</font>
                  <font color="#FF0000">{</font>props<font color="#990000">.</font>joinRequests<font color="#990000">.</font>length <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">?</font> props<font color="#990000">.</font>joinRequests<font color="#990000">.</font><b><font color="#000000">map</font></b><font color="#990000">((</font>_pubKey<font color="#990000">)</font> <font color="#990000">=&gt;</font> <font color="#FF0000">{</font>
                    <b><font color="#0000FF">const</font></b> pubKey <font color="#990000">=</font> JSON<font color="#990000">.</font><b><font color="#000000">parse</font></b><font color="#990000">(</font>_pubKey<font color="#990000">)</font> <font color="#990000">||</font> <font color="#FF0000">''</font><font color="#990000">;</font>
                    let contacts <font color="#990000">=</font> props<font color="#990000">.</font>contacts<font color="#990000">;</font>
                    let user_key <font color="#990000">=</font> pubKey<font color="#990000">.</font>x <font color="#990000">+</font> <font color="#FF0000">" "</font> <font color="#990000">+</font> pubKey<font color="#990000">.</font>y<font color="#990000">;</font>
                    <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font>contacts<font color="#990000">.</font><b><font color="#000000">hasOwnProperty</font></b><font color="#990000">(</font>pubKey<font color="#990000">.</font>x <font color="#990000">+</font> <font color="#FF0000">" "</font> <font color="#990000">+</font> pubKey<font color="#990000">.</font>y<font color="#990000">))</font> <font color="#FF0000">{</font>
                      <b><font color="#0000FF">const</font></b> username <font color="#990000">=</font> <font color="#990000">(</font>user_key <font color="#990000">===</font> <font color="#990000">(</font>props<font color="#990000">.</font>exportable_pubKey<font color="#990000">.</font>x <font color="#990000">+</font> <font color="#FF0000">" "</font> <font color="#990000">+</font> props<font color="#990000">.</font>exportable_pubKey<font color="#990000">.</font>y<font color="#990000">))</font> <font color="#990000">?</font> <font color="#FF0000">"Me"</font> <font color="#990000">:</font> <font color="#FF0000">'User '</font> <font color="#990000">+</font> <font color="#990000">(</font>Object<font color="#990000">.</font><b><font color="#000000">keys</font></b><font color="#990000">(</font>contacts<font color="#990000">).</font>length <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">).</font><b><font color="#000000">toString</font></b><font color="#990000">();</font>
                      contacts<font color="#990000">[</font>user_key<font color="#990000">]</font> <font color="#990000">=</font> username<font color="#990000">;</font>
                      props<font color="#990000">.</font><b><font color="#000000">updateContacts</font></b><font color="#990000">(</font>contacts<font color="#990000">);</font>
                    <font color="#FF0000">}</font>
                    <b><font color="#0000FF">return</font></b> <font color="#990000">(</font>
                      <font color="#990000">&lt;</font>tr<font color="#990000">&gt;</font>
                        <font color="#990000">&lt;</font>td id<font color="#990000">=</font><font color="#FF0000">'username-joinRequest'</font><font color="#990000">&gt;</font><font color="#FF0000">{</font>contacts<font color="#990000">[</font>pubKey<font color="#990000">.</font>x <font color="#990000">+</font> <font color="#FF0000">" "</font> <font color="#990000">+</font> pubKey<font color="#990000">.</font>y<font color="#990000">]</font><font color="#FF0000">}</font><font color="#990000">&lt;/</font>td<font color="#990000">&gt;</font>
                        <font color="#990000">&lt;</font>td<font color="#990000">&gt;&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button green-btn'</font> id<font color="#990000">=</font><font color="#FF0000">'green-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> props<font color="#990000">.</font><b><font color="#000000">acceptVisitor</font></b><font color="#990000">(</font>_pubKey<font color="#990000">)</font><font color="#FF0000">}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'accept button text'</font><font color="#990000">&gt;</font>ACCEPT<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>button<font color="#990000">&gt;&lt;/</font>td<font color="#990000">&gt;</font>
                      <font color="#990000">&lt;/</font>tr<font color="#990000">&gt;</font>
                    <font color="#990000">)</font>
                  <font color="#FF0000">}</font><font color="#990000">)</font> <font color="#990000">:</font> <font color="#990000">&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'no join requests text'</font><font color="#990000">&gt;</font>No <b><font color="#0000FF">new</font></b> join requests <b><font color="#0000FF">for</font></b> <b><font color="#0000FF">this</font></b> room<font color="#990000">!&lt;/</font>Trans<font color="#990000">&gt;</font><font color="#FF0000">}</font>
                <font color="#990000">&lt;/</font>tbody<font color="#990000">&gt;</font>
              <font color="#990000">&lt;/</font>table<font color="#990000">&gt;</font>
            <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font> <font color="#990000">:</font> <b><font color="#0000FF">null</font></b>
        <font color="#FF0000">}</font>
        <font color="#FF0000">{</font>
          <font color="#990000">!</font>props<font color="#990000">.</font>locked <font color="#990000">?</font>
            <font color="#990000">&lt;</font>div className<font color="#990000">=</font><font color="#FF0000">"adminSection"</font><font color="#990000">&gt;</font>
              <font color="#990000">&lt;</font>button className<font color="#990000">=</font><font color="#FF0000">'admin-button gray-btn'</font> onClick<font color="#990000">=</font><font color="#FF0000">{</font><font color="#990000">()</font> <font color="#990000">=&gt;</font> JwModal<font color="#990000">.</font><b><font color="#000000">open</font></b><font color="#990000">(</font><font color="#FF0000">'confirm-lockdown'</font><font color="#990000">)</font><font color="#FF0000">}</font><font color="#990000">&gt;&lt;</font>Trans id<font color="#990000">=</font><font color="#FF0000">'restrict button text'</font><font color="#990000">&gt;</font>Restrict<font color="#990000">&lt;</font><font color="#FF6600">/Trans&gt;&lt;/</font>button<font color="#990000">&gt;</font>
            <font color="#990000">&lt;/</font>div<font color="#990000">&gt;</font> <font color="#990000">:</font> <b><font color="#0000FF">null</font></b>
        <font color="#FF0000">}</font>
      <font color="#990000">&lt;/</font>div <font color="#990000">&gt;</font>
    <font color="#990000">);</font>
<font color="#FF0000">}</font>

<b><font color="#0000FF">export</font></b> <b><font color="#0000FF">default</font></b> Admin<font color="#990000">;</font>
</tt></pre>
